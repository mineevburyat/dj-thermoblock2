{% extends "home/base.html" %}

{% block title %}
ThermoBlock — магазин блоков несъемной опалубки
{% endblock %}

{% block content %}
<!-- Секция: Модельный ряд ThermoBlock -->
<section class="section models-section" id="models">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-8 text-center">
                <h2 class="display-5 fw-bold mb-3">Модельный ряд блоков ThermoBlock</h2>
                <p class="lead text-muted">Выберите оптимальное решение для вашего проекта</p>
                <div class="alert alert-info d-inline-block mt-3">
                    <i class="bi bi-info-circle me-2"></i>
                    Все блоки производятся по ГОСТ 31310-2015
                </div>
            </div>
        </div>
        <div class="accordion" id="blockTypesAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#blockTypes">
                    <i class="bi bi-grid-3x3-gap me-2"></i>
                    Посмотреть все модели блоков
                    </button>
                </h2>
            <div id="blockTypes" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <!-- Таблица сравнения моделей -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="table-responsive">
                    <table class="table table-hover table-bordered">
                        <thead class="table-primary">
                            <tr>
                                <th scope="col">Модель</th>
                                <th scope="col">ThermoBlock <span class="badge bg-warning">Стандарт</span></th>
                                <th scope="col">ThermoBlock <span class="badge bg-info">Плюс</span></th>
                                <th scope="col">ThermoBlock <span class="badge bg-success">Премиум</span></th>
                                <th scope="col">ThermoBlock <span class="badge bg-danger">Сейсмо</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">Толщина утеплителя</th>
                                <td>50 мм</td>
                                <td>80 мм</td>
                                <td>100 мм</td>
                                <td>100 мм</td>
                            </tr>
                            <tr>
                                <th scope="row">Толщина стены</th>
                                <td>250 мм</td>
                                <td>300 мм</td>
                                <td>350 мм</td>
                                <td>400 мм</td>
                            </tr>
                            <tr>
                                <th scope="row">Коэф. теплопроводности</th>
                                <td>0,12 Вт/м·°C</td>
                                <td>0,09 Вт/м·°C</td>
                                <td>0,08 Вт/м·°C</td>
                                <td>0,08 Вт/м·°C</td>
                            </tr>
                            <tr>
                                <th scope="row">Прочность на сжатие</th>
                                <td>B25</td>
                                <td>B30</td>
                                <td>B35</td>
                                <td>B40</td>
                            </tr>
                            <tr>
                                <th scope="row">Сейсмостойкость</th>
                                <td>7 баллов</td>
                                <td>8 баллов</td>
                                <td>8 баллов</td>
                                <td>9 баллов</td>
                            </tr>
                            <tr>
                                <th scope="row">Вес блока</th>
                                <td>15 кг</td>
                                <td>18 кг</td>
                                <td>22 кг</td>
                                <td>25 кг</td>
                            </tr>
                            <tr class="table-success">
                                <th scope="row">Рекомендация</th>
                                <td>Дачные дома, гаражи</td>
                                <td>Коттеджи для ПМЖ</td>
                                <td>Элитные дома, бани</td>
                                <td>Сейсмичные районы</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
                </div>
            </div>
        </div>
    
        
        
        <!-- Детализация блоков -->
        <div class="row g-4 mb-5">
            <div class="col-lg-3 col-md-6">
                <div class="card model-card h-100 border-primary">
                    <div class="card-header bg-primary text-white text-center py-3">
                        <h4 class="mb-0">ThermoBlock Стандарт</h4>
                        <div class="text-warning">★ Начальный уровень</div>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <div class="model-visual mx-auto">
                                <div class="wall-cutaway">
                                    <div class="concrete-layer" style="width: 40%;"></div>
                                    <div class="insulation-layer" style="width: 20%; background: #4CAF50;"></div>
                                    <div class="concrete-layer" style="width: 40%;"></div>
                                </div>
                                <small class="text-muted d-block mt-2">Структура блока: 50 мм утеплитель</small>
                            </div>
                        </div>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Для дачных домов</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Летних кухонь</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Гаражей, бань</li>
                            <li><i class="bi bi-check-circle text-success me-2"></i> Хозпостроек</li>
                        </ul>
                        <div class="text-center mt-3">
                            <button class="btn btn-outline-primary calculate-btn" data-model="standard">
                                Рассчитать количество
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card model-card h-100 border-info">
                    <div class="card-header bg-info text-white text-center py-3">
                        <h4 class="mb-0">ThermoBlock Плюс</h4>
                        <div class="text-warning">★★★ Рекомендуем</div>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <div class="model-visual mx-auto">
                                <div class="wall-cutaway">
                                    <div class="concrete-layer" style="width: 35%;"></div>
                                    <div class="insulation-layer" style="width: 30%; background: #2196F3;"></div>
                                    <div class="concrete-layer" style="width: 35%;"></div>
                                </div>
                                <small class="text-muted d-block mt-2">Структура блока: 80 мм утеплитель</small>
                            </div>
                        </div>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Коттеджи для ПМЖ</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> До -25°C без доп. утепления</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Оптимальное соотношение</li>
                            <li><i class="bi bi-check-circle text-success me-2"></i> Самая популярная модель</li>
                        </ul>
                        <div class="text-center mt-3">
                            <button class="btn btn-info calculate-btn" data-model="plus">
                                Рассчитать количество
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card model-card h-100 border-success">
                    <div class="card-header bg-success text-white text-center py-3">
                        <h4 class="mb-0">ThermoBlock Премиум</h4>
                        <div class="text-warning">★★★★ Премиум класс</div>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <div class="model-visual mx-auto">
                                <div class="wall-cutaway">
                                    <div class="concrete-layer" style="width: 30%;"></div>
                                    <div class="insulation-layer" style="width: 40%; background: #FF9800;"></div>
                                    <div class="concrete-layer" style="width: 30%;"></div>
                                </div>
                                <small class="text-muted d-block mt-2">Структура блока: 100 мм утеплитель</small>
                            </div>
                        </div>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Элитное жилье</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> До -35°C без доп. утепления</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Пассивный дом стандарт</li>
                            <li><i class="bi bi-check-circle text-success me-2"></i> Усиленная арматура</li>
                        </ul>
                        <div class="text-center mt-3">
                            <button class="btn btn-success calculate-btn" data-model="premium">
                                Рассчитать количество
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card model-card h-100 border-danger">
                    <div class="card-header bg-danger text-white text-center py-3">
                        <h4 class="mb-0">ThermoBlock Сейсмо</h4>
                        <div class="text-warning">★★★★★ Макс. защита</div>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <div class="model-visual mx-auto">
                                <div class="wall-cutaway">
                                    <div class="concrete-layer" style="width: 25%;"></div>
                                    <div class="insulation-layer" style="width: 50%; background: #F44336;"></div>
                                    <div class="concrete-layer" style="width: 25%;"></div>
                                    <div class="seismic-indicator">9 баллов</div>
                                </div>
                                <small class="text-muted d-block mt-2">Структура блока: 100 мм утеплитель + усиление</small>
                            </div>
                        </div>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Сейсмичные районы</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Усиленная конструкция</li>
                            <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i> Двойное армирование</li>
                            <li><i class="bi bi-check-circle text-success me-2"></i> Для ответственных объектов</li>
                        </ul>
                        <div class="text-center mt-3">
                            <button class="btn btn-danger calculate-btn" data-model="seismic">
                                Рассчитать количество
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Дополнительная информация -->
        <div class="row mt-5">
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="bi bi-rulers text-primary me-2"></i>
                            Стандартные размеры блоков
                        </h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <strong>Длина:</strong> 1000 мм / 1250 мм
                            </li>
                            <li class="list-group-item">
                                <strong>Высота:</strong> 250 мм / 300 мм
                            </li>
                            <li class="list-group-item">
                                <strong>Соединение:</strong> Паз-гребень
                            </li>
                            <li class="list-group-item">
                                <strong>Материал утеплителя:</strong> Вспененный полистирол ПСБ-С-25
                            </li>
                            <li class="list-group-item">
                                <strong>Класс горючести:</strong> Г1 (слабогорючий)
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="bi bi-gear text-primary me-2"></i>
                            Комплектующие
                        </h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-light rounded p-2 me-3">
                                        <i class="bi bi-puzzle text-primary fs-4"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Угловые блоки</h6>
                                        <small class="text-muted">Наружные и внутренние</small>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-light rounded p-2 me-3">
                                        <i class="bi bi-arrow-right-square text-primary fs-4"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Заглушки</h6>
                                        <small class="text-muted">Для оконных и дверных проемов</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-light rounded p-2 me-3">
                                        <i class="bi bi-tools text-primary fs-4"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Крепежная система</h6>
                                        <small class="text-muted">Стяжки, скобы</small>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <div class="bg-light rounded p-2 me-3">
                                        <i class="bi bi-box-seam text-primary fs-4"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Комплекты для коммуникаций</h6>
                                        <small class="text-muted">Для проводки и труб</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- CTA внутри секции -->
        <div class="row justify-content-center mt-5">
            <div class="col-lg-8 text-center">
                <div class="alert alert-primary" role="alert">
                    <h4 class="alert-heading">Не можете определиться с моделью?</h4>
                    <p>Наш специалист поможет подобрать оптимальный вариант для вашего проекта</p>
                    <a href="#cta" class="btn btn-primary btn-lg mt-2">
                        <i class="bi bi-person-check me-2"></i> Получить консультацию
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .models-section {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 100px 0;
    }
    
    .model-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-width: 2px;
    }
    
    .model-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    
    .model-visual {
        width: 200px;
        height: 100px;
        position: relative;
    }
    
    .wall-cutaway {
        display: flex;
        height: 60px;
        border: 2px solid #dee2e6;
        border-radius: 5px;
        overflow: hidden;
        margin-top: 20px;
    }
    
    .concrete-layer {
        background: linear-gradient(45deg, #adb5bd, #6c757d);
        height: 100%;
    }
    
    .insulation-layer {
        height: 100%;
        position: relative;
    }
    
    .insulation-layer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 5px,
            rgba(255,255,255,0.3) 5px,
            rgba(255,255,255,0.3) 10px
        );
    }
    
    .seismic-indicator {
        position: absolute;
        top: -25px;
        right: 10px;
        background: #dc3545;
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.8rem;
        font-weight: bold;
    }
    
    .calculate-btn {
        transition: all 0.3s ease;
    }
    
    .calculate-btn:hover {
        transform: scale(1.05);
    }
    
    @media (max-width: 768px) {
        .table-responsive {
            font-size: 0.9rem;
        }
        
        .model-card {
            margin-bottom: 20px;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Калькулятор блоков
        const calculateButtons = document.querySelectorAll('.calculate-btn');
        
        calculateButtons.forEach(button => {
            button.addEventListener('click', function() {
                const model = this.getAttribute('data-model');
                const modelNames = {
                    'standard': 'ThermoBlock Стандарт',
                    'plus': 'ThermoBlock Плюс',
                    'premium': 'ThermoBlock Премиум',
                    'seismic': 'ThermoBlock Сейсмо'
                };
                
                // Показываем модальное окно с калькулятором
                showCalculatorModal(modelNames[model]);
            });
        });
        
        function showCalculatorModal(modelName) {
            // Создаем модальное окно Bootstrap
            const modalHTML = `
                <div class="modal fade" id="calculatorModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Расчет количества блоков</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>Для модели: <strong>${modelName}</strong></p>
                                <div class="mb-3">
                                    <label class="form-label">Площадь стен (м²):</label>
                                    <input type="number" class="form-control" id="wallArea" placeholder="Например: 150" min="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Высота этажа (м):</label>
                                    <input type="number" class="form-control" id="floorHeight" value="2.7" min="2" max="5" step="0.1">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Проемы (окна/двери) %:</label>
                                    <input type="range" class="form-range" id="openingsPercent" min="0" max="40" value="15">
                                    <div class="d-flex justify-content-between">
                                        <small>0%</small>
                                        <span id="openingsValue">15%</span>
                                        <small>40%</small>
                                    </div>
                                </div>
                                <div class="alert alert-info mt-3">
                                    <h6>Примерный расчет:</h6>
                                    <p id="calculationResult">Заполните данные для расчета</p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
                                <button type="button" class="btn btn-primary" onclick="saveCalculation('${modelName}')">
                                    Сохранить расчет
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Добавляем модальное окно в DOM
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Инициализируем модальное окно
            const modal = new bootstrap.Modal(document.getElementById('calculatorModal'));
            modal.show();
            
            // Обработчики для динамического расчета
            document.getElementById('openingsPercent').addEventListener('input', updateCalculation);
            document.getElementById('wallArea').addEventListener('input', updateCalculation);
            document.getElementById('floorHeight').addEventListener('input', updateCalculation);
            
            function updateCalculation() {
                const openingsPercent = document.getElementById('openingsPercent').value;
                document.getElementById('openingsValue').textContent = openingsPercent + '%';
                
                const wallArea = document.getElementById('wallArea').value;
                const floorHeight = document.getElementById('floorHeight').value;
                
                if (wallArea && floorHeight) {
                    // Примерная формула расчета
                    const blocksPerSquareMeter = 4; // Примерное количество блоков на м²
                    const effectiveArea = wallArea * (1 - openingsPercent / 100);
                    const estimatedBlocks = Math.ceil(effectiveArea * blocksPerSquareMeter);
                    
                    document.getElementById('calculationResult').innerHTML = `
                        <strong>Приблизительно потребуется:</strong><br>
                        ${estimatedBlocks} блоков ${modelName}<br>
                        <small class="text-muted">* Точный расчет предоставит наш специалист</small>
                    `;
                }
            }
            
            // Глобальная функция для сохранения
            window.saveCalculation = function(model) {
                alert(`Расчет для ${model} сохранен. Мы учтем его при подготовке коммерческого предложения.`);
                modal.hide();
            };
            
            // Удаляем модальное окно при закрытии
            document.getElementById('calculatorModal').addEventListener('hidden.bs.modal', function() {
                this.remove();
            });
        }
    });
</script>

{% endblock %}